#ifndef UNISTDX_TEST_EXCEPTION
#define UNISTDX_TEST_EXCEPTION

#include <unistdx/base/bad_call>

#include <gtest/gtest.h>

#define UNISTDX_EXPECT_ERROR(errcond, src) \
    try { \
        src; \
    } catch (const ::sys::bad_call& err) { \
        EXPECT_EQ(errcond, err.errc()); \
    }

#endif // vim:filetype=cpp
