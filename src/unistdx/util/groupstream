#ifndef UNISTDX_UTIL_GROUPSTREAM
#define UNISTDX_UTIL_GROUPSTREAM

#include <unistdx/bits/no_copy_and_move>
#include <unistdx/it/basic_istream_iterator>
#include <unistdx/util/group>

namespace sys {

	/**
	\brief Input stream of system groups.
	\date 2018-05-25
	\author Ivan Gankevich
	\ingroup stream
	\see group
	\see group_iterator
	\details
	Useful to traverse all system groups in conjunction with
	\link group_iterator\endlink.
	*/
	class groupstream {

	private:
		bool _end = false;

	public:

		groupstream();

		~groupstream();

		UNISTDX_NO_COPY_AND_MOVE(groupstream)

		/// Returns true if the end of stream is not reached.
		inline explicit
		operator bool() const noexcept {
			return !this->_end;
		}

		/// Returns true if the end of stream is reached.
		inline bool
		operator!() const noexcept {
			return !this->operator bool();
		}

		/// Read the next group from the stream.
		groupstream&
		operator>>(group& rhs);

	};

	/// Iterator for \link groupstream\endlink.
	typedef basic_istream_iterator<groupstream, group> group_iterator;

}

#endif // vim:filetype=cpp
